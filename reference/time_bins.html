<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate time bins — time_bins • palaeoverse</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate time bins — time_bins"><meta name="description" content="A function to generate time bins for a given study interval and geological
timescale. This function is flexible in that either stage-level or higher
stratigraphic-level (e.g. period) time bins can be called, valid timescales
from Macrostrat can be
used, or a data.frame of a geological timescale can be provided. In
addition, near equal-length time bins can be generated by grouping
intervals together. For example, for a target bin size of 10 Myr, the
function will generate bins that have a mean bin length close to
10 Myr. Similarly, for a specified number of bins (n_bins), the function
will generate this number of bins with with a bin duration as uniform as
possible. However, users may also want to consider grouping stages based on
other reasoning e.g. availability of outcrop (see Dean et al. 2020)."><meta property="og:description" content="A function to generate time bins for a given study interval and geological
timescale. This function is flexible in that either stage-level or higher
stratigraphic-level (e.g. period) time bins can be called, valid timescales
from Macrostrat can be
used, or a data.frame of a geological timescale can be provided. In
addition, near equal-length time bins can be generated by grouping
intervals together. For example, for a target bin size of 10 Myr, the
function will generate bins that have a mean bin length close to
10 Myr. Similarly, for a specified number of bins (n_bins), the function
will generate this number of bins with with a bin duration as uniform as
possible. However, users may also want to consider grouping stages based on
other reasoning e.g. availability of outcrop (see Dean et al. 2020)."><meta property="og:image" content="https://palaeoverse.palaeoverse.org/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">palaeoverse</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/phanerozoic-reefs.html">Latitudinal trends in Phanerozoic reefs</a></li>
    <li><a class="dropdown-item" href="../articles/tetrapod-biodiversity.html">Alpha diversity and geographic range size of Carboniferous and Permian tetrapods</a></li>
    <li><a class="dropdown-item" href="../articles/structure-and-standards.html">Contributing to palaeoverse: structure and standards</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/palaeoverse/palaeoverse/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Generate time bins</h1>
      <small class="dont-index">Source: <a href="https://github.com/palaeoverse/palaeoverse/blob/main/R/time_bins.R" class="external-link"><code>R/time_bins.R</code></a></small>
      <div class="d-none name"><code>time_bins.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A function to generate time bins for a given study interval and geological
timescale. This function is flexible in that either stage-level or higher
stratigraphic-level (e.g. period) time bins can be called, valid timescales
from <a href="https://macrostrat.org/api/defs/timescales?all" class="external-link">Macrostrat</a> can be
used, or a <code>data.frame</code> of a geological timescale can be provided. In
addition, near equal-length time bins can be generated by grouping
intervals together. For example, for a target bin size of 10 Myr, the
function will generate bins that have a mean bin length close to
10 Myr. Similarly, for a specified number of bins (<code>n_bins</code>), the function
will generate this number of bins with with a bin duration as uniform as
possible. However, users may also want to consider grouping stages based on
other reasoning e.g. availability of outcrop (see Dean et al. 2020).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">time_bins</span><span class="op">(</span></span>
<span>  interval <span class="op">=</span> <span class="st">"Phanerozoic"</span>,</span>
<span>  rank <span class="op">=</span> <span class="st">"stage"</span>,</span>
<span>  size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n_bins <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  assign <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  scale <span class="op">=</span> <span class="st">"GTS2020"</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-interval">interval<a class="anchor" aria-label="anchor" href="#arg-interval"></a></dt>
<dd><p><code>character or numeric</code>. Interval name available in
<code><a href="GTS2020.html">GTS2020</a></code> or <code><a href="GTS2012.html">GTS2012</a></code>. If a single interval name
is provided, this interval is returned. If two interval names are
provided, these intervals and those existing between are returned. If a
single numeric age is provided, the interval that covers this age is
returned. If two numeric ages are provided, the intervals occurring in
the range of these ages are returned. Defaults to "Phanerozoic". This
argument is ignored if <code>scale</code> is not "GTS2020" or "GTS2012".</p></dd>


<dt id="arg-rank">rank<a class="anchor" aria-label="anchor" href="#arg-rank"></a></dt>
<dd><p><code>character</code>. Which stratigraphic rank is desired? Choose
from: "stage", "epoch", "period", "era", and "eon". This argument is
ignored if <code>scale</code> is not "GTS2020" or "GTS2012".</p></dd>


<dt id="arg-size">size<a class="anchor" aria-label="anchor" href="#arg-size"></a></dt>
<dd><p><code>numeric</code>. If equal-length time bins are desired, specify
the length in millions of years (Myr) of the time bins desired.</p></dd>


<dt id="arg-n-bins">n_bins<a class="anchor" aria-label="anchor" href="#arg-n-bins"></a></dt>
<dd><p><code>numeric</code>. For equal-length time bins, a fixed number of
time bins can be specified instead of a bin <code>size</code>. This argument will be
ignored if <code>size</code> is specified.</p></dd>


<dt id="arg-assign">assign<a class="anchor" aria-label="anchor" href="#arg-assign"></a></dt>
<dd><p><code>numeric</code>. A numeric vector of age estimates to use to
assign to requested bins. If assign is specified, a numeric vector is
returned of the midpoint age of the specified bins. Note this is the
simplified approach of assignment in <code>palaeoverse</code> included for data with
'known' point-age estimates. For a wider range of binning methods, see
<code><a href="bin_time.html">palaeoverse::bin_time()</a></code>.</p></dd>


<dt id="arg-scale">scale<a class="anchor" aria-label="anchor" href="#arg-scale"></a></dt>
<dd><p><code>character</code> or <code>data.frame</code>. Specify the desired
geological timescale to be used: "GTS2020" (default), "GTS2012", a valid
timescale from
<a href="https://macrostrat.org/api/defs/timescales?all" class="external-link">Macrostrat</a>, or
user-input <code>data.frame</code>. If a <code>data.frame</code> is provided, it must contain
at least the following named columns: "interval_name", "max_ma", and
"min_ma". As such, age data should be provided in Ma.</p></dd>


<dt id="arg-plot">plot<a class="anchor" aria-label="anchor" href="#arg-plot"></a></dt>
<dd><p><code>logical</code>. Should a plot of time bins be generated?</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>data.frame</code> of time bins for the specified intervals or a
list with a <code>data.frame</code> of time bins and a named <code>numeric</code>
vector (bin number) of binned age estimates (midpoint of specified bins)
if <code>assign</code> is specified. By default, the time bins <code>data.frame</code>
contains the following columns: bin, interval_name, rank, max_ma, mid_ma,
min_ma, duration_myr, abbr (interval abbreviation), colour and font
(colour). If <code>size</code> or <code>n_bins</code> is specified, the time bins
<code>data.frame</code> contains the following columns: bin, max_ma, mid_ma,
min_ma, duration_myr, grouping_rank, intervals, colour and font.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function uses either the Geological Time Scale 2020,
Geological Time Scale 2012, a valid timescale from
<a href="https://macrostrat.org/api/defs/timescales?all" class="external-link">Macrostrat</a>, or a
user-input <code>data.frame</code> (see <code>scale</code> argument) to generate time bins.
Note, timescales from
<a href="https://macrostrat.org/api/defs/timescales?all" class="external-link">Macrostrat</a> tend to
contain the most up-to-date information (e.g. the Geological Time Scale).
Additional information on included Geological Time Scales and source can
be accessed via:</p><ul><li><p><code><a href="GTS2020.html">GTS2020</a></code></p></li>
<li><p><code><a href="GTS2012.html">GTS2012</a></code></p></li>
</ul><p>Available interval names are accessible via the <code>interval_name</code> column
in <code>GTS2012</code> and <code>GTS2020</code>. Data of the Geological Timescale 2020 and
2012 were compiled by Lewis A. Jones (2022-07-02).</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>


<p>Dean, C.D., Chiarenza, A.A. and Maidment, S.C., 2020. Formation binning: a
new method for increased temporal resolution in regional studies, applied
to the Late Cretaceous dinosaur fossil record of North America.
Palaeontology, 63(6), 881-901. <a href="https://doi.org/10.1111/pala.12492" class="external-link">doi:10.1111/pala.12492</a>
.</p>
    </div>
    <div class="section level2">
    <h2 id="developer-s-">Developer(s)<a class="anchor" aria-label="anchor" href="#developer-s-"></a></h2>


<p>Lewis A. Jones &amp; Kilian Eichenseer</p>
    </div>
    <div class="section level2">
    <h2 id="reviewer-s-">Reviewer(s)<a class="anchor" aria-label="anchor" href="#reviewer-s-"></a></h2>


<p>Kilian Eichenseer &amp; William Gearty</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#Using numeric age</span></span></span>
<span class="r-in"><span><span class="va">ex1</span> <span class="op">&lt;-</span> <span class="fu">time_bins</span><span class="op">(</span>interval <span class="op">=</span> <span class="fl">10</span>, plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="time_bins-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Using numeric age range</span></span></span>
<span class="r-in"><span><span class="va">ex2</span> <span class="op">&lt;-</span> <span class="fu">time_bins</span><span class="op">(</span>interval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">100</span><span class="op">)</span>, plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="time_bins-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Using a single interval name</span></span></span>
<span class="r-in"><span><span class="va">ex3</span> <span class="op">&lt;-</span> <span class="fu">time_bins</span><span class="op">(</span>interval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Maastrichtian"</span><span class="op">)</span>, plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="time_bins-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Using a range of intervals and near-equal duration bins</span></span></span>
<span class="r-in"><span><span class="va">ex4</span> <span class="op">&lt;-</span> <span class="fu">time_bins</span><span class="op">(</span>interval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Fortunian"</span>, <span class="st">"Meghalayan"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                 size <span class="op">=</span> <span class="fl">10</span>, plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Target duration of equal length time bins was set to 10 Myr.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 54 time bins were generated with a mean length of 10.02 Myr and a standard deviation of 2.4 Myr.</span>
<span class="r-plt img"><img src="time_bins-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Assign bins based on given age estimates</span></span></span>
<span class="r-in"><span><span class="va">ex5</span> <span class="op">&lt;-</span> <span class="fu">time_bins</span><span class="op">(</span>interval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Fortunian"</span>, <span class="st">"Meghalayan"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                 assign <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">232</span>, <span class="fl">167</span>, <span class="fl">33</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Use user-input data.frame to generate near-equal length bins</span></span></span>
<span class="r-in"><span><span class="va">scale</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>interval_name <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,</span></span>
<span class="r-in"><span>                    min_ma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">18</span>, <span class="fl">32</span>, <span class="fl">38</span>, <span class="fl">45</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    max_ma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">18</span>, <span class="fl">32</span>, <span class="fl">38</span>, <span class="fl">45</span>, <span class="fl">53</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ex6</span> <span class="op">&lt;-</span> <span class="fu">time_bins</span><span class="op">(</span>scale <span class="op">=</span> <span class="va">scale</span>, size <span class="op">=</span> <span class="fl">20</span>, plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Target duration of equal length time bins was set to 20 Myr.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 3 time bins were generated with a mean length of 17.67 Myr and a standard deviation of 2.52 Myr.</span>
<span class="r-plt img"><img src="time_bins-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Use North American land mammal ages from Macrostrat and specify a desired</span></span></span>
<span class="r-in"><span><span class="co">#number of bins</span></span></span>
<span class="r-in"><span><span class="va">ex7</span> <span class="op">&lt;-</span> <span class="fu">time_bins</span><span class="op">(</span>scale <span class="op">=</span> <span class="st">"North American land mammal ages"</span>, n_bins <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Number of equal length time bins was set to 7.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 7 time bins were generated with a mean length of 9.43 Myr and a standard deviation of 1.19 Myr.</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.lewisajones.com" class="external-link">Lewis A. Jones</a>, <a href="https://williamgearty.com" class="external-link">William Gearty</a>, <a href="https://bsse.ethz.ch/cevo/the-group/people/person-detail.html?persid=295484" class="external-link">Bethany J. Allen</a>, <a href="https://keichenseer.netlify.app" class="external-link">Kilian Eichenseer</a>, <a href="https://www.ucl.ac.uk/earth-sciences/people/research-staff/dr-chris-dean" class="external-link">Christopher D. Dean</a>, <a href="https://www.researchgate.net/profile/Joseph-Flannery-Sutherland" class="external-link">Joseph T. Flannery-Sutherland</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

