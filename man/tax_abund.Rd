% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tax_abund.R
\name{tax_abund}
\alias{tax_abund}
\title{Summarise abundance of fossil occurrences}
\usage{
tax_abund(
  occdf,
  name = "genus",
  abund_vals = NULL,
  plot = FALSE,
  plot_args = NULL
)
}
\arguments{
\item{occdf}{\code{data.frame}. A dataframe of fossil occurrences.}

\item{name}{\code{character}. A column name with the taxonomic rank at which
you want to calculate abundance (e.g. "genus").}

\item{abund_vals}{\code{character}. An optional column name of abundance
values for a given taxon or collection. If this column is provided it
will be used to calculate the abundance values. Otherwise, row wise
occurrence counts will be used.}

\item{plot}{\code{logical}. Should a rank abundance distribution plot be
generated in addition to the dataframe of results?}

\item{plot_args}{\code{list}. A list of optional arguments relevant to
plotting. See Details for options.}
}
\value{
A \code{data.frame} containing the following columns: Taxon ID
(\code{Taxon}), absolute abundance of each fossil taxon (\code{Abundance}), Relative
abundance of each fossil taxon (\code{Rel_abundance}), natural logarithm of
relative abundance of each fossil taxon (\code{Log_rel_abundance}), abundance
rank within dataset (\code{Abundance_rank}).
}
\description{
A function to calculate the absolute and relative abundance of fossil
occurrences in a dataset and optionally plot the rank abundance distribution
of taxa
}
\details{
The (absolute and relative) abundance of each taxon is calculated by
tabulating all rowwise counts of unique taxon occurrences (\code{Taxon} column)
from the input \code{occdf}. Absolute abundance is calculated by counting the
number of occurrences, while relative abundance is calculated relative to
the community in the dataset. A plot of the rank abundance distribution
is also returned if \code{plot = TRUE}. Customisable argument
options to pass to \code{plot_args} as a list (and
their defaults) for plotting include:
\itemize{
\item main = "Rank abundance"
\item xlab = "Abundance rank"
\item ylab = "Relative abundance"
\item col = "black"
\item brks = 50
\item log = FALSE
\item abs = FALSE
}

The \code{brks} argument will set the x axis label breaks. Use \code{log = TRUE} to
plot the logged rank abundance, and use \code{abs = TRUE} to plot the
absolute abundance data.

Caution: taxonomic synonyms will cause abundances for the accepted taxon
to be distributed across the synonymised taxa, causing the accepted taxon
to be under-counted. Use \code{\link[=tax_check]{tax_check()}} to check for and clean synonyms.
}
\examples{
 # Grab internal data and remove NAs
 occdf <- subset(tetrapods, !is.na(family))
 # Summarise family abundance
 ex <- tax_rel_abun(occdf = occdf, name = "family", plot = TRUE)
 # Customise appearance
 ex <- tax_rel_abun(occdf = occdf, name = "family", plot = TRUE,
                     plot_args = list(log = TRUE, col = "pink", brks = 100))


}
